document.addEventListener("DOMContentLoaded",function(){const t=document.querySelectorAll(".snippet-ref"),s=document.querySelectorAll(".snippet"),o=document.querySelector(".snippets-container");let n=null;function e(){if(window.innerWidth<800||!o)return;const e=o.getBoundingClientRect(),n=e.top;t.forEach((e,t)=>{const s=document.getElementById("snippet-"+t);if(s){const o=e.getBoundingClientRect(),t=o.top,i=t-n;s.style.position="absolute",s.style.top=i+"px";const a=t>0&&t<window.innerHeight;a?s.classList.add("visible"):s.classList.remove("visible")}})}if(t.forEach((e,t)=>{e.addEventListener("click",function(e){e.preventDefault();const o=document.getElementById("snippet-"+t);o&&window.innerWidth>=800&&(s.forEach(e=>e.classList.remove("active")),o.classList.add("active","visible"),n=o)})}),window.innerWidth>=800){const e={rootMargin:"-30% 0px -60% 0px",threshold:[0,1]},o=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){const o=e.target.getAttribute("data-snippet"),t=document.getElementById("snippet-"+o);t&&!n&&(s.forEach(e=>e.classList.remove("active")),t.classList.add("active"))}})},e);t.forEach(e=>o.observe(e))}if(document.addEventListener("click",function(e){!e.target.closest(".snippet-ref")&&!e.target.closest(".snippet")&&(n=null)}),window.innerWidth>=800){e();let t;window.addEventListener("scroll",()=>{clearTimeout(t),t=setTimeout(()=>{e()},10)}),window.addEventListener("scroll",e,{passive:!0}),window.addEventListener("resize",()=>{window.innerWidth>=800&&e()})}})