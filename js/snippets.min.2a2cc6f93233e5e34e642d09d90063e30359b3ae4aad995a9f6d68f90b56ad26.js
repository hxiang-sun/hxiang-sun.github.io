document.addEventListener("DOMContentLoaded",function(){const e=document.querySelectorAll(".snippet-ref"),s=document.querySelectorAll(".snippet"),t=document.querySelector(".snippets-container");let n=null;function o(){if(window.innerWidth<800||!t)return;const n=t.getBoundingClientRect(),s=n.top;e.forEach((e,t)=>{const n=document.getElementById("snippet-"+t);if(n){const o=e.getBoundingClientRect(),t=o.top,i=t-s;n.style.position="absolute",n.style.top=i+"px";const a=t>0&&t<window.innerHeight;a?n.classList.add("visible"):n.classList.remove("visible")}})}if(e.forEach((e,t)=>{e.addEventListener("click",function(e){e.preventDefault();const o=document.getElementById("snippet-"+t);o&&window.innerWidth>=800&&(s.forEach(e=>e.classList.remove("active")),o.classList.add("active","visible"),n=o)})}),window.innerWidth>=800){const t={rootMargin:"-30% 0px -60% 0px",threshold:[0,1]},o=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){const o=e.target.getAttribute("data-snippet"),t=document.getElementById("snippet-"+o);t&&!n&&(s.forEach(e=>e.classList.remove("active")),t.classList.add("active"))}})},t);e.forEach(e=>o.observe(e))}document.addEventListener("click",function(e){!e.target.closest(".snippet-ref")&&!e.target.closest(".snippet")&&(n=null)}),window.innerWidth>=800&&(o(),updateVisibleSnippets(),t.addEventListener("scroll",updateVisibleSnippets),window.addEventListener("resize",()=>{o(),updateVisibleSnippets()}))})