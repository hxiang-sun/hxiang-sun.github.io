document.addEventListener("DOMContentLoaded",function(){const t=document.querySelectorAll(".snippet-ref"),o=document.querySelectorAll(".snippet"),i=document.querySelector(".snippets-container");let n=null,s=!1;const a=[],r=[];function c(){t.forEach((e,t)=>{const n=document.getElementById("snippet-"+t);n&&(a[t]=e.offsetTop,r[t]=n)})}function e(){if(window.innerWidth<800||!i)return;const e=window.pageYOffset,n=i.getBoundingClientRect(),o=n.top+e;t.forEach((t,n)=>{const s=r[n];if(s){const t=a[n],i=t-o;s.style.transform=`translateY(${i}px)`;const r=e,c=e+window.innerHeight,l=t>r-200&&t<c+200;l?s.classList.add("visible"):s.classList.remove("visible")}}),s=!1}function l(){s||(window.requestAnimationFrame(e),s=!0)}if(t.forEach((e,t)=>{e.addEventListener("click",function(e){e.preventDefault();const s=document.getElementById("snippet-"+t);s&&window.innerWidth>=800&&(o.forEach(e=>e.classList.remove("active")),s.classList.add("active","visible"),n=s)})}),window.innerWidth>=800){const e={rootMargin:"-30% 0px -60% 0px",threshold:[0,1]},s=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){const s=e.target.getAttribute("data-snippet"),t=document.getElementById("snippet-"+s);t&&!n&&(o.forEach(e=>e.classList.remove("active")),t.classList.add("active"))}})},e);t.forEach(e=>s.observe(e))}if(document.addEventListener("click",function(e){!e.target.closest(".snippet-ref")&&!e.target.closest(".snippet")&&(n=null)}),window.innerWidth>=800){e();let t;window.addEventListener("scroll",()=>{clearTimeout(t),t=setTimeout(()=>{e()},10)}),window.addEventListener("scroll",e,{passive:!0}),window.addEventListener("resize",()=>{window.innerWidth>=800&&e()})}})